(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{278:function(e,t,a){e.exports=a(516)},515:function(e,t,a){},516:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(35),i=a.n(c),d=a(532),s=a(23),l=a(241),u=a.n(l),p=a(41),m=a(242),f=a(243),h=a(32),b=a(33),E=a(42),v=a.n(E),g=v()(),y=v()(),I=v()(),C=(n={},Object(b.a)(n,g,{id:g,name:"Todo",cardIds:[],editing:!1}),Object(b.a)(n,y,{id:y,name:"Doing",cardIds:[],editing:!1}),Object(b.a)(n,I,{id:I,name:"Done",cardIds:[],editing:!1}),n),_={boards:{0:{id:0,name:"Development",listIds:[g,y,I],editing:!1},1:{id:1,name:"Personal Project",listIds:[g],editing:!1}},boardIds:[0,1]},O=a(268),D={addListEditor:{boardId:null,open:!1},addCardEditor:{listId:null,open:!1},boardDrawer:{open:!1,pinned:!1},createBoardModal:{open:!1}},A=a(117),j=A.outerReducer(Object(p.combineReducers)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_BOARD":var a=t.payload.boardId,n=Object.assign({},e);return n.boards[a]||(n.boardIds.push(a),n.boards[a]=t.payload),n;case"DELETE_LIST":var r=t.payload,o=r.boardId,c=r.listId,i=Object.assign({},e.boards);if(i[o]){var d=i[o].listIds.indexOf(c);i[o].listIds.splice(d,1)}return Object(h.a)({},e,{boards:i});case"ATTACH_TO_BOARD":var s=t.payload,l=s.boardId,u=s.listId,p=Object.assign({},e);return p.boards[l]&&p.boards[l].listIds.push(u),p;case"UPDATE_BOARD":var m=t.payload,f=m.boardId,b=m.name,E=m.editing,v=Object.assign({},e);return v.boards[f]&&(v.boards[f].name=b,v.boards[f].editing=E),v;default:return e}},lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_LIST":return Object(h.a)({},e,Object(b.a)({},t.payload.id,t.payload));case"DELETE_LIST":var a=Object.assign({},e);return a[t.payload.listId]&&delete a[t.payload.listId],a;case"ATTACH_TO_LIST":var n=t.payload,r=n.listId,o=n.cardId,c=Object.assign({},e);return c[r].cardIds.push(o),c;case"DETACH_FROM_LIST":var i=t.payload,d=i.listId,s=i.cardId,l=Object.assign({},e),u=l[d].cardIds.indexOf(s);return l[d].cardIds.splice(u,1),l;case"UPDATE_LIST":var p=t.payload,m=p.listId,f=p.name,E=p.editing,v=Object.assign({},e);return v[m].name=f,v[m].editing=E,v;case"DELETE_CARD":var g=t.payload,y=g.cardId,I=g.listId,_=function(e){return Object.assign({},e)}(e),O=_[I];if(!O)return e;var D=O.cardIds.findIndex(function(e){return y===e});return O.cardIds.splice(D,1),_;default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CARD":return[].concat(Object(O.a)(e),[t.payload]);case"UPDATE_CARD":var a=e.slice(0),n=a.findIndex(function(e){return e.id===t.payload.id});return a[n]=Object(h.a)({},a[n],t.payload),a;case"DELETE_CARD":var r=e.slice(0),o=r.findIndex(function(e){return e.id===t.payload.cardId});return r.splice(o,1),r;case"DELETE_FROM_LIST":var c=e.slice(0);return t.payload.map(function(e){var t=c.findIndex(function(t){return t.id===e});c.splice(t,1)}),c;case"IMAGE_UPLOAD":var i=e.slice(0),d=i.findIndex(function(e){return e.id===t.payload.cardId});i[d].cardImage=t.payload.file.name;default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,a=function(a){return Object(h.a)({},e,Object(b.a)({},a,Object(h.a)({},e[a],t.payload)))};switch(t.type){case"UI_ADD_LIST_EDITOR":return a("addListEditor");case"UI_ADD_CARD_EDITOR":return a("addCardEditor");case"UI_BOARD_DRAWER":return a("boardDrawer");case"UI_CREATE_BOARD_MODAL":return a("createBoardModal");default:return e}}})),T=a(24),w=a.n(T),R="https://boiling-earth-76159.herokuapp.com",k=a(244),S=a.n(k),B=Object(p.createStore)(j,Object(p.compose)(Object(p.applyMiddleware)(m.a,A.middleware(function(){return new Promise(function(e){w()("".concat(R,"/state")).then(function(e){e=e.data;var t,a={boardIds:[],boards:{}};return e.boards.map(function(e){a.boardIds.push(e.id),a.boards[e.id]={boardId:e.id,editing:!1,listIds:e.listIds,name:e.name}}),e.boards={boards:a.boards,boardIds:a.boardIds},t=S.a.indexBy(e.lists,"id"),e.lists=t,e}).then(e)})})),Object(f.composeWithDevTools)()));B.subscribe(u()(function(){var e=B.getState();!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){alert("Failed to save state: ".concat(a))}}({boards:e.boards,lists:e.lists,cards:e.cards})},1e3));var L=B,N=function(e){return o.a.createElement(s.a,{store:L},e.children)},x=a(49),M=a.n(x),F=a(74),U=a(18),P=a(19),H=a(21),K=a(20),W=a(22),G=a(245),J=a.n(G),V=a(75),z=a(534),q=a(517),Q=a(67),X=a(526),Y=a(525),Z=function(e){function t(){return Object(U.a)(this,t),Object(H.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"board-card",onClick:this.props.onClick},o.a.createElement("div",{className:"board-card__thumbnail"},"\xa0"),o.a.createElement("div",{className:"board-card__name"},this.props.name))}}]),t}(o.a.Component),$=function(e){var t=e.content;return o.a.createElement("div",{className:"link-button",onClick:e.onClick},t)},ee=function(e){return i.a.createPortal(o.a.createElement("div",{className:"click-catcher",onClick:e.onDismiss}),document.getElementById("clickCatcher"))},te=function(e){return{type:"UI_CREATE_BOARD_MODAL",payload:{open:e}}},ae=function(e){if("string"!==typeof e)throw new Error("input need to be string");return e.trim().toLowerCase().split(" ").join("")},ne=function(e){function t(){var e,a;Object(U.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).boards=Object.values(a.props.boards),a.state={filteredBoardIds:a.props.boardIds,keyword:""},a.handleSearch=function(e){a.setState({keyword:e.target.value},function(){var e=ae(a.state.keyword);if(""===e)return a.setState({filteredBoardIds:a.props.boardIds});var t=a.boards.filter(function(t){return ae(t.name).includes(e)}).map(function(e){return e.id});a.setState({filteredBoardIds:t})})},a.renderBoards=function(){var e=a.props.boards;return a.state.filteredBoardIds.map(function(t){return o.a.createElement(Y.a,{to:"/".concat(t),key:t},o.a.createElement(Z,Object.assign({},e[t],{onClick:a.props.onDismiss})))})},a.renderPinToggleButton=function(){var e=a.props,t=e.pinned,n=e.pinBoardDrawer;return t?o.a.createElement($,{content:"Don't keep this menu open",onClick:function(){return n(!t)}}):o.a.createElement($,{content:"Always keep this menu open",onClick:function(){return n(!t)}})},a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pinned,a=e.toggleCreateBoardModal,n=t?"board-drawer--pinned":"";return i.a.createPortal(o.a.createElement("div",{className:"board-drawer ".concat(n)},o.a.createElement("div",{className:"board-drawer__header ".concat(n)},o.a.createElement("span",null,"Boards")),o.a.createElement("div",{className:"board-drawer__content"},o.a.createElement("div",{className:"board-drawer__content__search"},o.a.createElement(X.a,{fluid:!0,placeholder:"Find boards by name...",value:this.state.keyword,onChange:this.handleSearch})),o.a.createElement("div",{className:"board-drawer__content__boards"},this.renderBoards()),o.a.createElement("div",{className:"board-drawer__content__buttons"},o.a.createElement($,{content:"Create new board...",onClick:function(){return a(!0)}}),this.renderPinToggleButton())),t||o.a.createElement(ee,{onDismiss:this.props.onDismiss})),document.getElementById("drawer"))}}]),t}(o.a.Component),re=Object(s.b)(function(e){return{boardIds:e.boards.boardIds,boards:e.boards.boards}},{pinBoardDrawer:function(e){return{type:"UI_BOARD_DRAWER",payload:{pinned:e}}},toggleCreateBoardModal:te})(ne),oe=Object(s.b)(function(e){return{boardDrawer:e.ui.boardDrawer}},{toggleBoardDrawer:function(e){return{type:"UI_BOARD_DRAWER",payload:{open:e}}}})(function(e){var t=function(){if(e.boardDrawer.open)return e.toggleBoardDrawer(!1);e.toggleBoardDrawer(!0)};return o.a.createElement("header",{className:"app-bar"},e.boardDrawer.pinned?null:o.a.createElement(q.a,{className:"app-bar__boards-button",primary:!0,onClick:t},o.a.createElement(Q.a,{name:"square"}),"Boards"),o.a.createElement("div",{className:"app-bar__logo"}),function(){var t=e.boardDrawer,a=t.pinned,n=t.open;return a?o.a.createElement(re,{pinned:a}):n?o.a.createElement(re,{pinned:a,onDismiss:function(){return e.toggleBoardDrawer(!1)}}):void 0}())}),ce=a(531),ie=a(267),de=a(530),se=a(529),le=function(e){return function(t){var a={id:v()(),editing:!1,content:e.content,heading:e.heading,labels:[]};return w.a.post("".concat(R,"/card/create"),a).then(function(e){if(200==e.status)return t(ue(a)),ue(a)}).catch(function(e){console.error(e)})}},ue=function(e){return{type:"CREATE_CARD",payload:Object(h.a)({},e)}},pe=function(e){return{type:"UPDATE_CARD",payload:e}},me=function(e,t){return function(a){var n={cardId:t,listId:e};return w.a.post("".concat(R,"/card/delete"),n).then(function(e){if(200==e.status)return a(fe(n)),fe(n)}).catch(function(e){console.error(e)})}},fe=function(e){return{type:"DELETE_CARD",payload:e}},he=function(e){return i.a.createPortal(o.a.createElement("div",{className:"overlay",onClick:function(t){t.stopPropagation(),e.onDismiss()}},e.children),document.getElementById("overlay"))},be=function(e){function t(e){var a;Object(U.a)(this,t),(a=Object(H.a)(this,Object(K.a)(t).call(this,e))).cardRef=o.a.createRef(),a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state;a.props.onUpdate(a.props.id,t),a.setState({showModal:!1})},a.uploadFile=function(){a.fileInputRef.current.click()},a.fileChange=function(e){var t=e.target.files[0];a.props.uploadFileAsync(t,a.props.id)},a.hideModal=function(){var e=a.state;a.props.onUpdate(a.props.id,e,!1)},a.cardImage=function(){return o.a.createElement(ie.a,{src:"".concat(R,"/uploads/").concat(a.state.cardImage),fluid:!0,alt:"Cannot load"})},a.renderEditor=function(){return o.a.createElement(he,{onDismiss:function(){return null}},o.a.createElement(de.a,{size:"tiny",open:a.props.editing},o.a.createElement(de.a.Header,null,"Edit Card Details"),o.a.createElement(de.a.Content,null,o.a.createElement(se.a,{onSubmit:a.handleSubmit},o.a.createElement(se.a.Field,null,o.a.createElement("label",null,"Heading"),o.a.createElement("input",{name:"heading",value:a.state.heading,onChange:a.handleChange})),o.a.createElement(se.a.Field,null,o.a.createElement("label",null,"Description"),o.a.createElement("textarea",{name:"content",value:a.state.content,onChange:a.handleChange})),o.a.createElement(se.a.Field,null),o.a.createElement(q.a,{type:"submit"},"Submit"),o.a.createElement(q.a,{onClick:a.hideModal},"Cancel")),o.a.createElement("div",{className:"mt-2"}),o.a.createElement(q.a,{content:"Choose Image",labelPosition:"left",icon:"file",onClick:a.uploadFile}),o.a.createElement("input",{ref:a.fileInputRef,type:"file",hidden:!0,onChange:a.fileChange}))))},a.renderCard=function(){var e=a.props,t=e.connectDragSource,n=e.id,r=e.onDelete,c=e.editing,i=e.content,d=e.heading;return t(o.a.createElement("div",null,o.a.createElement("div",{ref:a.cardRef,className:"card",onClick:function(){return a.props.onClick(n)}},a.state.cardImage&&a.cardImage(),o.a.createElement("div",{className:"card__labels"}),o.a.createElement("div",{className:"card__header"},d||"No Heading"),o.a.createElement("div",{className:"card__content"},o.a.createElement("p",null,i)),o.a.createElement("div",{className:"card__close",onClick:function(){return r(n)}},o.a.createElement(Q.a,{name:"times"})),c&&a.renderEditor())))};var n=a.props.cards.findIndex(function(e){return e.id===a.props.id});return a.state={heading:a.props.cards[n].heading,content:a.props.cards[n].content,cardImage:a.props.cards[n].cardImage,showModal:!1},a.fileInputRef=o.a.createRef(),a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return this.props.isDragging?null:this.renderCard()}}]),t}(o.a.Component),Ee=Object(s.b)(function(e){return{cards:e.cards}},{uploadFileAsync:function(e,t){var a={file:e,cardId:t},n=new FormData;return n.append("cardImage",e,e.name),n.append("cardId",t),function(e){return w()({method:"post",url:"".concat(R,"/card/upload"),data:n}).then(function(t){200==t.status&&e({type:"IMAGE_UPLOAD",payload:a})}).catch(function(e){console.log(e)})}},loadCardImage:function(e){}})(Object(V.DragSource)("CARD",{beginDrag:function(e){return{id:e.id,listId:e.listId}},isDragging:function(e,t){return t.getItem().id===e.id}},function(e,t){return{connectDragSource:e.dragSource(),isDraggin:t.isDragging()}})(be)),ve=function(e){return function(t){var a={id:v()(),name:e,editing:!1,cardIds:[]};return w.a.post("".concat(R,"/list/add"),a).then(function(e){if(200==e.status)return t(ge(a)),ge(a)}).catch(function(e){console.log(e)})}},ge=function(e){return{type:"CREATE_LIST",payload:e}},ye=function(e){return{type:"DELETE_LIST",payload:e}},Ie=function(e){return{type:"UPDATE_LIST",payload:e}},Ce=function(e,t){return function(a){var n={cardId:t,listId:e};return w.a.post("".concat(R,"/list/attach"),n).then(function(e){if(200==e.status)return a(_e(n)),_e(n)}).catch(function(e){console.log(e)})}},_e=function(e){return{type:"ATTACH_TO_LIST",payload:e}},Oe=function(e){return{type:"DETACH_FROM_LIST",payload:e}},De=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(H.a)(this,Object(K.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state;a.props.onCreateCard(t),a.setState({showModal:!1})},a.showModal=function(){a.setState({showModal:!0})},a.hideModal=function(){a.setState({showModal:!1})},a.button=o.a.createElement("button",{className:"list__content__button",onClick:function(){return a.showModal()}},o.a.createElement(Q.a,{name:"plus"}),o.a.createElement("span",null,"Add another card")),a.state={heading:"",content:"",imageUrl:"",file:null,showModal:!1},a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return o.a.createElement(de.a,{size:"tiny",open:this.state.showModal,trigger:this.button},o.a.createElement(de.a.Header,null,"Create a new Card"),o.a.createElement(de.a.Content,null,o.a.createElement(se.a,{onSubmit:this.handleSubmit},o.a.createElement(se.a.Field,null,o.a.createElement("label",null,"Heading"),o.a.createElement("input",{name:"heading",value:this.state.heading,onChange:this.handleChange})),o.a.createElement(se.a.Field,null,o.a.createElement("label",null,"Description"),o.a.createElement("textarea",{name:"content",value:this.state.content,onChange:this.handleChange})),o.a.createElement(se.a.Field,null),o.a.createElement(q.a,{type:"submit"},"Submit"),o.a.createElement(q.a,{onClick:this.hideModal},"Cancel"))))}}]),t}(o.a.Component),Ae=Object(s.b)(null,{openAddCardEditor:function(e){return{type:"UI_ADD_CARD_EDITOR",payload:{listId:e,open:!0}}},closeAddCardEditor:function(){return{type:"UI_ADD_CARD_EDITOR",payload:{listId:null,open:!1}}},createCardAsync:le,attachToListAsync:Ce})(De),je=Object(s.b)(function(e){return{lists:e.lists,cards:e.cards,addCardEditor:e.ui.addCardEditor}},{createCardAsync:le,updateCardAsync:function(e){return function(t){var a=Object(h.a)({},e);return w.a.post("".concat(R,"/card/update"),a).then(function(e){if(200==e.status)return t(pe(a)),pe(a)}).catch(function(e){console.error(e)})}},deleteCardAsync:me,attachToListAsync:Ce,detachFromListAsync:function(e,t){return function(a){var n={cardId:t,listId:e};return w.a.post("".concat(R,"/list/detach"),n).then(function(e){if(200==e.status)return a(Oe(n)),Oe(n)}).catch(function(e){console.log(e)})}}})(Object(V.DropTarget)("CARD",{drop:function(e,t){var a=t.getItem().id,n=t.getItem().listId;e.detachFromListAsync(n,a),e.attachToListAsync(e.id,a)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.cardIds,a=e.onDelete,n=e.connectDropTarget,r=e.id,c=function(){var t=Object(F.a)(M.a.mark(function t(a){var n;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createCardAsync(a);case 2:n=t.sent,e.attachToListAsync(e.id,n.payload.id);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),i=function(t){e.deleteCardAsync(e.id,t)},d=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(h.a)({id:t,editing:n},a);e.updateCardAsync(r)},s=function(t){var a=e.cards.find(function(e){return e.id===t});a.editing=!0,e.updateCardAsync(a)};return n(o.a.createElement("div",{className:"list"},o.a.createElement("div",{className:"list__dragging-over ".concat(e.isOver&&"list__dragging-over--active")}),o.a.createElement("div",{className:"list__header"},e.children,o.a.createElement("div",{className:"list__header__close",onClick:function(){return a(r)}},o.a.createElement(Q.a,{name:"times"}))),o.a.createElement("div",{className:"list__content"},t.map(function(t){var a=e.cards.find(function(e){return e.id===t});return o.a.createElement(Ee,Object.assign({key:t,onDelete:i,onUpdate:d,onClick:s,listId:e.id},a))}),o.a.createElement(Ae,{open:e.addCardEditor.open&&r===e.addCardEditor.listId,onCreateCard:c,listId:r}))))})),Te=function(e){function t(){var e,a;Object(U.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={content:a.props.content},a.inputRef=o.a.createRef(),a.handleFinishEdit=function(e){var t=a.props,n=t.content,r=t.id,o=t.onEdit;if("keydown"!==e.type||"Enter"===e.key){if(!a.state.content.trim())return a.setState({content:n}),o(r,n);o(r,e.target.value)}},a.handleInputChange=function(e){a.setState({content:e.target.value})},a.renderValue=function(){return o.a.createElement("input",{type:"text",className:"editable ".concat(a.props.className),onClick:a.props.onClick,value:a.state.content,onChange:a.handleInputChange,readOnly:!0})},a.renderEdit=function(){return o.a.createElement("input",{ref:a.inputRef,type:"text",className:"editable editable--editing ".concat(a.props.className),onKeyDown:a.handleFinishEdit,onBlur:a.handleFinishEdit,onChange:a.handleInputChange,defaultValue:a.props.content,autoFocus:!0,value:a.state.content})},a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.editing?this.renderEdit():this.renderValue()}}]),t}(o.a.Component);Te.defaultProps={editing:!1};var we=Te,Re=function(e){return{type:"CREATE_BOARD",payload:e}},ke=function(e){return{type:"ATTACH_TO_BOARD",payload:e}},Se=function(e){return{type:"UPDATE_BOARD",payload:e}},Be=a(533),Le=function(e){return o.a.createElement(q.a,e)};Le.displayName="button";var Ne=Le,xe=function(e){return o.a.createElement(X.a,Object.assign({},e,{ref:e.forwardref}))};xe.displayName="input";var Me=xe,Fe=a(527),Ue=function(e){return o.a.createElement(Fe.a,e)};Ue.displayName="textarea";var Pe=Ue,He=function(e){function t(){var e,a;Object(U.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={content:a.props.value||"",count:a.props.value?a.props.value.length:0,error:{}},a.editorRef=o.a.createRef(),a.inputRef=o.a.createRef(),a.handleClick=function(e){e.stopPropagation()},a.handleDismiss=function(){var e=a.editorRef.current.style;e.opacity=0,e.maxHeight="36px",setTimeout(function(){a.props.onDismiss()},160)},a.handleInputChange=function(e){if(!a.props.limit)return a.setState({content:e.target.value});var t=e.target.value.trim().length;t>=a.props.limit?a.setState({error:{exceedMaxCount:!0}}):a.state.error.exceedMaxCount&&a.setState({error:{exceedMaxCount:!1}}),a.setState({content:e.target.value,count:t})},a.handleKeyDown=function(e){if("Enter"===e.key)return a.handleSubmit(e)},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state.content.trim();t&&!a.state.error.exceedMaxCount&&(a.setState({content:""}),a.inputRef.current.focus(),a.props.onSubmit(t))},a.renderInput=function(e){var t=a.props.placeholder;return o.a.createElement("div",{className:"editor__input"},o.a.cloneElement(e,{placeholder:t,value:a.state.content,onChange:a.handleInputChange,onKeyDown:a.handleKeyDown,forwardref:a.inputRef}),a.renderCount())},a.renderTextArea=function(e){var t=a.props.placeholder;return o.a.createElement("div",{className:"editor__textarea"},o.a.createElement(Be.a,{innerRef:a.inputRef},o.a.cloneElement(e,{placeholder:t,value:a.state.content,onChange:a.handleInputChange,onKeyDown:a.handleKeyDown})),a.renderCount())},a.renderCount=function(){var e=a.props.limit,t=a.state,n=t.count,r=t.error;return o.a.createElement("div",{className:"editor__count ".concat(r.exceedMaxCount&&"editor__count--error")},o.a.createElement("span",null,e&&n+"/"+e))},a.renderButton=function(e){return o.a.createElement("div",{className:"editor__button"},o.a.cloneElement(e,{primary:!0,onClick:a.handleSubmit}))},a.renderChildren=function(){var e=a.props.children;return o.a.Children.map(e,function(e){switch(e.type.displayName){case"input":return a.renderInput(e);case"textarea":return a.renderTextArea(e);case"button":return a.renderButton(e);default:return e}})},a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus(),this.inputRef.current.select();var e=this.editorRef.current.style;e.opacity=1,e.maxHeight="200px"}},{key:"render",value:function(){var e=this.props.className;return o.a.createElement(Be.a,{innerRef:this.editorRef},o.a.createElement(se.a,{className:"editor ".concat(e||""),onSubmit:this.handleSubmit,onClick:this.handleClick},this.renderChildren(),o.a.createElement(ee,{onDismiss:this.handleDismiss})))}}]),t}(o.a.Component);He.Input=Me,He.TextArea=Pe,He.Button=Ne;var Ke=He,We=Object(s.b)(null,{openAddListEditor:function(e){return{type:"UI_ADD_LIST_EDITOR",payload:{boardId:e,open:!0}}},closeAddListEditor:function(){return{type:"UI_ADD_LIST_EDITOR",payload:{open:!1}}},createListAsync:ve,attachToBoardAsync:function(e,t){return function(a){var n={boardId:e,listId:t};return w.a.post("".concat(R,"/board/attach"),n).then(function(e){if(200==e.status)return a(ke(n)),ke(n)}).catch(function(e){console.error(e)})}}})(function(e){var t=function(){var t=Object(F.a)(M.a.mark(function t(a){var n;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createListAsync(a);case 2:n=t.sent,e.attachToBoardAsync(e.boardId,n.payload.id);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a=o.a.createElement("button",{className:"add-list__button",onClick:function(){return e.openAddListEditor(e.boardId)}},o.a.createElement(Q.a,{name:"plus"})," Add another list"),n=o.a.createElement(Ke,{className:"add-list__editor",placeholder:"Enter list title...",onSubmit:t,onDismiss:e.closeAddListEditor,limit:25},o.a.createElement(Ke.Input,{fluid:!0,autoFocus:!0}),o.a.createElement(Ke.Button,{content:"Add List"}));return o.a.createElement("div",{className:"add-list"},e.open?n:a)}),Ge=function(e){function t(){var e,a;Object(U.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).boardId=a.props.match.params.id,a.handleNameClick=function(){var e=a.props.boards[a.boardId].name;a.props.updateBoardAsync(a.boardId,e,!0)},a.handleDeleteList=function(e){var t=a.props.lists[e],n=[];t.cardIds.forEach(function(e){return n.push(e)}),a.props.deleteAllListCards(n),a.props.deleteListAsync(a.boardId,e)},a.renderLists=function(){var e=a.props,t=e.boards,n=e.lists;return t[a.boardId].listIds.map(function(e){var t=n[e];return o.a.createElement(je,Object.assign({key:t.id},t,{onDelete:function(){return a.handleDeleteList(t.id)}}),o.a.createElement(we,{id:t.id,content:t.name,editing:t.editing,onClick:function(){return a.props.updateListAsync(t.id,t.name,!0)},onEdit:a.props.updateListAsync}))})},a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props.boards[this.boardId];if(!e)return o.a.createElement(ce.a,{to:"/"});var t=e.name,a=e.editing;return o.a.createElement("div",{className:"board"},o.a.createElement("div",{className:"board__header"},o.a.createElement(we,{className:"board__header__board-name",id:this.boardId,onClick:this.handleNameClick,editing:a,onEdit:this.props.updateBoardAsync,content:t})),o.a.createElement("div",{className:"board__content"},this.renderLists(),o.a.createElement("div",{className:"board__content__add"},o.a.createElement(We,{open:this.props.addListEditor.open&&this.boardId===this.props.addListEditor.boardId,boardId:this.boardId}))))}}]),t}(o.a.Component),Je=Object(s.b)(function(e){return{boards:e.boards.boards,lists:e.lists,addListEditor:e.ui.addListEditor}},{updateListAsync:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n){var r={listId:e,name:t,editing:a};return w.a.post("".concat(R,"/list/update"),r).then(function(e){if(200==e.status)return n(Ie(r)),Ie(r)}).catch(function(e){console.log(e)})}},createListAsync:ve,deleteListAsync:function(e,t){return function(a){var n={boardId:e,listId:t};return w.a.post("".concat(R,"/list/delete"),n).then(function(e){if(200==e.status)return a(ye(n)),ye(n)}).catch(function(e){console.log(e)})}},deleteCardAsync:me,updateBoardAsync:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n){var r={boardId:e,name:t,editing:a};return w.a.post("".concat(R,"/board/update"),r).then(function(e){if(200==e.status)return n(Se(r)),Se(r)}).catch(function(e){console.error(e)})}},deleteAllListCards:function(e){return function(t){return w.a.post("".concat(R,"/card/del-all-cards"),e).then(function(a){200==a.data&&t({type:"DELETE_FROM_LIST",payload:e})}).catch(function(e){console.log(e)})}}})(Ge),Ve=function(){return o.a.createElement("div",null,"Boards")},ze=a(536),qe=a(528),Qe=function(e){function t(){return Object(U.a)(this,t),Object(H.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return o.a.createElement(ze.a,null,o.a.createElement(qe.a,{exact:!0,path:"/",component:Ve}),o.a.createElement(qe.a,{path:"/:id",exact:!0,render:function(e){return o.a.createElement(Je,Object.assign({key:e.match.params.id},e))}}))}}]),t}(o.a.Component),Xe=function(e){function t(){return Object(U.a)(this,t),Object(H.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"create-board-modal"},o.a.createElement(Ke,{className:"create-board-modal__editor",placeholder:"Add board title",onSubmit:this.props.onSubmit},o.a.createElement(Ke.Input,null),o.a.createElement(Ke.Button,{content:"Create Board"})))}}]),t}(o.a.Component),Ye=function(e){function t(){var e,a;Object(U.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.loadInitialState()},a.handleCreateBoard=function(){var e=Object(F.a)(M.a.mark(function e(t){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.createBoardAsync(t);case 2:n=e.sent,r=n.boardId,a.props.toggleCreateBoardModal(!1),a.props.history.push("/".concat(r));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.createBoardModal=o.a.createElement(he,{onDismiss:function(){return a.props.toggleCreateBoardModal(!1)}},o.a.createElement(Xe,{onSubmit:a.handleCreateBoard})),a}return Object(W.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props.pinned?"app app--drawer-pinned":"app";return o.a.createElement("div",{className:e},o.a.createElement("div",{id:"clickCatcher"}),o.a.createElement(oe,null),o.a.createElement(Qe,null),this.props.createBoardModal.open&&this.createBoardModal)}}]),t}(o.a.Component),Ze=Object(z.a)(Object(V.DragDropContext)(J.a)(Object(s.b)(function(e){return{boards:e.boards,pinned:e.ui.boardDrawer.pinned,createBoardModal:e.ui.createBoardModal}},{toggleCreateBoardModal:te,createBoardAsync:function(e){return function(t){var a={boardId:v()(),name:e,listIds:[],editing:!1};return w.a.post("".concat(R,"/board/create"),a).then(function(e){if(200==e.status)return t(Re(a)),Re(a)}).catch(function(e){console.log(e.message)})}},loadInitialState:function(){return{type:"redux-async-initial-state/STATE_LOADING_START"}}})(Ye)));a(514),a(515);i.a.render(o.a.createElement(N,null,o.a.createElement(d.a,null,o.a.createElement(Ze,null))),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.420ecafa.chunk.js.map